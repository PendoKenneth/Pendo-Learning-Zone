<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pendo Learning Zone</title>
  <link rel="stylesheet" href="styles.css" />
  <script defer src="main.js"></script>
</head>
<body>
  <div id="app">
    <!-- Navigation -->
    <nav id="nav" class="hidden">
      <button onclick="navigate('dashboard1')" id="nav-overview">Overview</button>
      <button onclick="navigate('dashboard2')" id="nav-analytics">Analytics</button>
      <button onclick="navigate('dashboard3')" id="nav-reports">Reports</button>
      <button onclick="navigate('dashboard4')" id="nav-settings">Settings</button>
      <button onclick="navigate('dashboard5')" id="nav-profile">Profile</button>
      <button onclick="navigate('productCatalogue')" id="nav-catalogue">Catalogue</button>
      <button onclick="logout()" id="logout-btn">Logout</button>
    </nav>

    <!-- Pages -->
    <section id="dashboard4" class="page hidden">
  <h2>Settings</h2>
  <form aria-label="Settings Form">
    <label for="language-select">Language</label>
    <select id="language-select" aria-label="Language Dropdown">
      <option value="en">English</option>
      <option value="fr">French</option>
      <option value="de">German</option>
    </select>

    <label for="notifications">Enable Notifications</label>
    <input type="checkbox" id="notifications" aria-label="Notifications Toggle" />

    <label for="timezone">Time Zone</label>
    <select id="timezone">
      <option value="UTC">UTC</option>
      <option value="EST">Eastern Standard Time</option>
      <option value="PST">Pacific Standard Time</option>
    </select>

    <fieldset>
      <legend>Theme Preferences</legend>
      <label><input type="radio" name="theme" value="light" checked /> Light</label>
      <label><input type="radio" name="theme" value="dark" /> Dark</label>
      <label><input type="radio" name="theme" value="hybrid" /> Hybrid</label>
    </fieldset>

    <div class="tooltip" data-tooltip="Save to apply changes on next login">
      <button type="submit">Save Settings</button>
    </div>
  </form>
</section>

<section id="dashboard5" class="page hidden">
  <h2>Profile</h2>
  <div id="userProfile" aria-label="User Profile Details"></div>

  <div class="card">
    <h3>Contact Info</h3>
    <p>Email: <a href="mailto:user@example.com">user@example.com</a></p>
    <p>Phone: <span>(123) 456-7890</span></p>
  </div>

  <div class="card">
    <h3>Account Preferences</h3>
    <form aria-label="Profile Preferences">
      <label for="display-name">Display Name</label>
      <input type="text" id="display-name" placeholder="Your name" />

      <label for="bio">Bio</label>
      <textarea id="bio" placeholder="Tell us about yourself..."></textarea>

      <button type="submit">Update Profile</button>
    </form>
  </div>
</section>

<section id="dashboard1" class="page hidden">
  <h2>Overview</h2>
  <div class="flex-grid">
    <div class="card" id="info-card" aria-label="Info Card">
      <h3>Welcome to Pendo Learning Zone</h3>
      <p>This is a demo zone for practicing Pendo tagging with various HTML elements.</p>
    </div>
    <div class="card tooltip" data-tooltip="Pendo Taggable Image" id="image-card">
      <img src="https://via.placeholder.com/300x150" alt="Demo Screenshot" class="tag-demo" id="tag-image" aria-label="Demo Image">
    </div>
  </div>
  <div class="card">
    <h3>Live Revenue Graph</h3>
    <img src="https://via.placeholder.com/600x200?text=Mock+Line+Graph" alt="Mock Line Graph of Revenue Trends" class="tag-demo">
  </div>
  <div class="card">
    <h3>Sales Conversion Funnel</h3>
    <img src="https://via.placeholder.com/600x200?text=Mock+Funnel+Chart" alt="Mock Funnel Chart for Sales" class="tag-demo">
  </div>
</section>
<section id="productCatalogue" class="page hidden">
  <h2>Product Catalogue</h2>
  <table border="1" aria-label="Product Table">
    <thead>
      <tr>
        <th>Product ID</th>
        <th>Name</th>
        <th>Category</th>
        <th>Price</th>
        <th>Stock</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>SKU1001</td>
        <td>Smart Speaker A1</td>
        <td>Audio</td>
        <td>$99.99</td>
        <td>52</td>
        <td><button class="tooltip" data-tooltip="Add to cart">Add</button></td>
      </tr>
      <tr>
        <td>SKU1042</td>
        <td>Wireless Headphones X3</td>
        <td>Audio</td>
        <td>$149.99</td>
        <td>30</td>
        <td><button class="tooltip" data-tooltip="Add to cart">Add</button></td>
      </tr>
      <tr>
        <td>SKU1123</td>
        <td>Smart Thermostat Z2</td>
        <td>Home Automation</td>
        <td>$199.00</td>
        <td>15</td>
        <td><button class="tooltip" data-tooltip="Add to cart">Add</button></td>
      </tr>
    </tbody>
  </table>

  <div class="card">
    <h3>Promotional Banner</h3>
    <div class="tooltip" data-tooltip="Seasonal deals and discounts">
      <span>Get 10% off on all Home Automation devices through July!</span>
    </div>
  </div>

  <div class="card">
    <h3>Filter and Sort</h3>
    <form id="productFilterForm">
      <label for="searchInput">Search:</label>
      <input type="text" id="searchInput" placeholder="Enter keyword...">

      <label for="categoryFilter">Category:</label>
      <select id="categoryFilter">
        <option value="">All</option>
        <option value="Audio">Audio</option>
        <option value="Home Automation">Home Automation</option>
      </select>

      <label for="sortBy">Sort by:</label>
      <select id="sortBy">
        <option value="name">Name</option>
        <option value="price">Price</option>
        <option value="stock">Stock</option>
      </select>

      <button type="submit">Apply</button>
    </form>
  </div>

  <script>
    document.getElementById('productFilterForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const category = document.getElementById('categoryFilter').value;
      const sortBy = document.getElementById('sortBy').value;
      const keyword = document.getElementById('searchInput').value.trim().toLowerCase();

      const rows = Array.from(document.querySelectorAll('#productCatalogue table tbody tr'));

      const filtered = rows.filter(row => {
        const cat = row.children[2].textContent.trim();
        const matchesCategory = !category || cat === category;
        const matchesKeyword = !keyword || row.textContent.toLowerCase().includes(keyword);
        return matchesCategory && matchesKeyword;
      });

      const getValue = (cell, key) => {
        const text = cell.textContent.trim();
        if (key === 'price') return parseFloat(text.replace('$', ''));
        if (key === 'stock') return parseInt(text);
        return text.toLowerCase();
      };

      filtered.sort((a, b) => {
        const valA = getValue(a.children[sortBy === 'name' ? 1 : sortBy === 'price' ? 3 : 4], sortBy);
        const valB = getValue(b.children[sortBy === 'name' ? 1 : sortBy === 'price' ? 3 : 4], sortBy);
        return valA > valB ? 1 : valA < valB ? -1 : 0;
      });

      const highlightMatch = (html, keyword) => {
        if (!keyword) return html;
        const regex = new RegExp(`(${keyword})`, 'gi');
        return html.replace(regex, '<mark>$1</mark>');
      };

      const tbody = document.querySelector('#productCatalogue table tbody');
      tbody.innerHTML = '';
      filtered.forEach(row => {
        const newRow = row.cloneNode(true);
        Array.from(newRow.children).forEach(cell => {
          cell.innerHTML = highlightMatch(cell.innerHTML, keyword);
        });
        tbody.appendChild(newRow);
      });
    });
  </script>
</section>


  </div>
</body>
</html>
